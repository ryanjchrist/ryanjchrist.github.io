<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altimeter System - Ryan Christ</title>
    <link rel="stylesheet" href="../portfolio.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <header class="masthead">
        <div class="nav-container">
            <a href="../index.html" class="site-title">Ryan Christ</a>
            <nav>
                <ul class="site-nav">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../projects.html">Projects</a></li>
                    <li><a href="../experience.html">Experience</a></li>
                    <li><a href="../about.html">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="project-detail-shell">
            <!-- Project Header -->
            <div class="project-header">
                <a href="../projects.html" class="back-link">← Back to Projects</a>
                <h1>Altimeter System</h1>
                <div class="project-meta">
                    <span class="project-tag">Electronics</span>
                    <span class="project-tag">CAD</span>
                    <span class="project-tag">Drones</span>
                </div>
                <p class="project-date">October 2024</p>
            </div>

            <!-- Hero Image -->
            <div class="project-hero">
                <img src="../assets/images/SkydioAlt.jpeg" alt="Altimeter System on Drone">
            </div>

            <!-- Project Content -->
            <div class="project-details-grid">
                <div class="project-main">
                    <div class="project-content">
                        <!-- Context -->
                        <h2>Context</h2>
                        <p>
                            One of the critical concerns identified in the O₃ST drone system involved the imprecision 
                            of existing altimeters. Altimeter precision is crucial for accurately identifying the height 
                            of elephants during wildlife monitoring flights. As the drone flies over an elephant, we need 
                            to detect precise changes in altimeter height, which are later used for more accurate body 
                            condition assessments.
                        </p>

                        <!-- Design & Approach -->
                        <h2>Design & Approach</h2>
                        <p>
                            I worked with Julian Dale, a Duke Project Engineer and Director of O₃ST, to redesign their 
                            existing altimeter system with a focus on reducing overall size, production costs, and improving 
                            accuracy. The new design integrates multiple sensors including a compact GPS module and laser 
                            rangefinder, all communicating over I²C protocol to minimize wiring complexity.
                        </p>

                        <!-- Technical Implementation -->
                        <h2>Technical Implementation</h2>
                        <p>
                            The redesigned system replaces the larger Grove GPS with a much more compact GP1818MK module. 
                            I also developed support for a new LW20/C laser rangefinder (I²C) for higher accuracy at greater 
                            altitudes. The altimeter enhances the drone's altitude tracking without disrupting the overall 
                            system architecture.
                        </p>

                        <h3>Data Logging & Signal Processing</h3>
                        <p>
                            I introduced a new feature that logs vertical altitude in the system's data logs using gravitational 
                            acceleration readings from the IMU while compensating for the drone's tilt angle. During testing, 
                            we noticed variations in tilt angle readings—the log file was recording tilt angles of up to 14 
                            degrees during extreme movements, while the IMU on the gimbal showed only ~0.02 degree fluctuations.
                        </p>
                        <p>
                            I identified that acceleration values from the drone were influencing the tilt calculation due to 
                            vibrations. To solve this, I implemented a 1D Kalman Filter, combining acceleration trigonometry 
                            with gyroscope integration to eliminate noise and provide accurate tilt compensation.
                        </p>

                        <h3>PCB Design & Hardware Integration</h3>
                        <p>
                            I created custom PCBs in KiCad to simplify sensor integration and reduce wiring complexity. The new 
                            design incorporates multiple microcontrollers (XIAO SAMD21, ProMicro, Feather M0) programmed with 
                            PlatformIO and Arduino IDE. I also redesigned the housing in SolidWorks for seamless drone integration.
                        </p>

                        <!-- Results & Outcomes -->
                        <h2>Results & Outcomes</h2>
                        <p>
                            The redesigned altimeter system achieved significant improvements in accuracy and integration. The 
                            system now provides ±1 cm accuracy, a substantial improvement over the previous design. The custom 
                            PCB reduced wiring complexity and improved reliability, while the Kalman filter implementation 
                            eliminated noise-related errors in tilt compensation.
                        </p>

                        <!-- Key Achievements -->
                        <h2>Key Achievements</h2>
                        <ul>
                            <li>Improved altimeter accuracy to ±1 cm through sensor fusion and filtering</li>
                            <li>Reduced system size and production costs with compact component selection</li>
                            <li>Implemented Kalman filtering for noise reduction in tilt compensation</li>
                            <li>Created custom PCBs in KiCad to simplify sensor integration</li>
                            <li>Redesigned housing in SolidWorks for seamless drone integration</li>
                            <li>Enhanced data logging with timestamped file organization</li>
                        </ul>

                        <!-- Future Improvements -->
                        <h2>Future Improvements</h2>
                        <p>
                            Additional improvements currently in development include:
                        </p>
                        <ul>
                            <li>Adding a code switch to log data every 1 sec or via hot shoe trigger logging at 15Hz shutter speed</li>
                            <li>Incorporating a smaller Arduino in the design for further size reduction</li>
                            <li>Adding a cheaper IMU module with an enable/disable option in the code</li>
                        </ul>
                    </div>
                </div>

                <!-- Sidebar -->
                <aside class="project-sidebar">
                    <div class="sidebar-section">
                        <h3>Technologies</h3>
                        <div class="technologies">
                            <span class="tech-badge">KiCad</span>
                            <span class="tech-badge">SolidWorks</span>
                            <span class="tech-badge">Arduino</span>
                            <span class="tech-badge">PlatformIO</span>
                            <span class="tech-badge">C++</span>
                            <span class="tech-badge">I²C</span>
                            <span class="tech-badge">Kalman Filter</span>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Key Metrics</h3>
                        <div class="project-metrics">
                            <div class="metric">
                                <span class="metric-value">±1 cm</span>
                                <span class="metric-label">Accuracy</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">LW20/C</span>
                                <span class="metric-label">Rangefinder</span>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Duration</h3>
                        <p>September 2024 - Present</p>
                    </div>

                    <div class="sidebar-section">
                        <h3>Role</h3>
                        <p>Electrical Engineering Intern at O₃ST</p>
                    </div>

                    <div class="sidebar-section">
                        <h3>Organization</h3>
                        <p>O₃ST - UAVs in Support of Marine Science</p>
                    </div>
                </aside>
            </div>

            <!-- Image Gallery -->
            <div class="project-gallery">
                <h2>Gallery</h2>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="../assets/images/O3STAltimeter.jpg" alt="O3ST Altimeter System" onclick="openLightbox(this)">
                    </div>
                    <div class="gallery-item">
                        <img src="../assets/images/AltWiring.png" alt="Altimeter Wiring Diagram" onclick="openLightbox(this)">
                    </div>
                    <div class="gallery-item">
                        <img src="../assets/images/AltimeterCode1.png" alt="Altimeter Code" onclick="openLightbox(this)">
                    </div>
                    <div class="gallery-item">
                        <img src="../assets/images/DroneAlt.jpg" alt="Drone with Altimeter" onclick="openLightbox(this)">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <!-- Footer -->
    <footer class="page__footer">
        <div class="footer-meta">
            <div class="footer-meta__primary">
                <span>&copy; 2025 Ryan Christ</span>
            </div>
            <div class="footer-meta__links">
                <a href="mailto:ryan.christ@duke.edu">Email</a>
                <span class="divider">·</span>
                <a href="https://github.com/ryanjchrist" target="_blank" rel="noopener">GitHub</a>
            </div>
        </div>
    </footer>

    <script>
        function openLightbox(img) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            lightbox.style.display = 'flex';
            lightboxImg.src = img.src;
            lightboxImg.alt = img.alt;
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });
    </script>
</body>
</html>
